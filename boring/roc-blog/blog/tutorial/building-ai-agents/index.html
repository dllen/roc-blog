<!doctype html><html class=scroll-smooth lang=en><head><meta charset=utf-8><link href=/css/style.css rel=stylesheet><link href=/line-awesome/css/line-awesome.min.css rel=stylesheet><script defer src=/js/main.js></script><title>Building AI Agents | 码农的自留地</title><body class="bg-white dark:bg-slate-900 transition ease-in-out"><section><div class="sticky top-0 bg-slate-100 dark:bg-slate-800"><div class="container mx-auto px-auto xl:px-0 w-full xl:w-1/2 flex place-content-between py-16 xl:py-8 font-sans text-6xl xl:text-2xl text-slate-900 dark:text-slate-300"><div class=flex><a class="m-0 p-0 text-slate-900 hover:text-slate-700 dark:text-slate-300 dark:hover:text-slate-200" href=/blog/> /blog </a><a class="m-0 p-0 text-slate-900 hover:text-slate-700 dark:text-slate-300 dark:hover:text-slate-200" href=/blog/tutorial/> /tutorial </a></div><div class="flex gap-4"><div class="hidden cursor-pointer" id=back-to-top><i class="las la-level-up-alt"></i></div><a href=/><i class="las la-home"></i></a><div class=cursor-pointer id=darkmode-toggle><div class="hidden dark:inline"><i class="las la-sun"></i></div><div class="inline dark:hidden"><i class="las la-moon"></i></div></div></div></div></div><div class="container mx-auto w-full xl:w-1/2 mb-16"><div class="mt-4 font-serif text-slate-600 dark:text-slate-500 text-4xl xl:text-base">2025-11-14</div><h1 class="w-full xl:w-2/3 mt-4 mb-8 font-serif text-8xl xl:text-4xl text-slate-900 dark:text-slate-300">Building AI Agents</h1><div class="mt-2 mb-6 flex flex-wrap gap-2"></div><div class="w-100 border-t mb-8 border-slate-300 dark:border-slate-700"></div><div class="prose dark:prose-invert prose-pre:rounded-none prose-headings:bg-amber-100 prose-headings:text-slate-800 dark:prose-headings:bg-indigo-900 prose-headings:font-normal dark:prose-headings:text-slate-300 prose-headings:p-2 prose-headings:w-max prose-headings:font-serif prose-2xl xl:prose-base"><h2 id=wei-shen-me-shi-dai-li-agents>为什么是代理（Agents）</h2><ul><li>从聊天到行动：LLM 由“对话”走向“执行”，代理通过工具使用、计划分解、状态记忆与自我反思完成复杂任务。<li>工作方式转变：任务循环为感知 → 计划 → 执行 → 评估 → 记忆更新 → 下一轮行动。<li>真实价值场景：浏览器操作、代码编辑、知识检索、工作流编排、数据处理与分析、跨系统自动化。</ul><h2 id=he-xin-neng-li-tu-pu>核心能力图谱</h2><ul><li>感知与状态化：解析输入、网页/文档结构抽取、环境状态建模。<li>计划与分解：Chain-of-Thought（CoT）、ReAct、Tree-of-Thought（ToT）做任务拆解与行动计划。<li>工具使用：API/浏览器/文件/代码/搜索/数据库等工具的安全调用（Toolformer、MCP 提供标准化接口）。<li>记忆与上下文：短期/长期记忆；语义记忆（向量库）、情节记忆（事件序列）、工作记忆（当前任务状态）。<li>反馈与自我修正：Reflexion 自我反思、评估驱动重试；人类反馈与自动度量结合。<li>多智能体协作：角色分工、同步/异步通信、协调策略与冲突处理。<li>可靠性与安全：越权防护、注入攻击防护、工具调用权限、速率限制、审计与追踪。</ul><h2 id=dian-xing-jia-gou-can-kao-shi-xian>典型架构（参考实现）</h2><ul><li>输入层：用户意图与环境信息（网页、文件、API 结果）。<li>规划层：任务理解、计划生成与策略选择（ReAct/CoT/ToT）。<li>执行层：工具调用器（MCP/自研 toolkits），带限制与回滚策略。<li>记忆层：向量数据库（Pinecone/Faiss）+ 事件日志（JSON/DB）+ 会话上下文管理。<li>评估层：在线度量（成功率/时间/成本/稳定性）+ 离线基准（任务集回放）。<li>编排层：多代理工作流（编排器/队列/并发池）与可观测性（日志、追踪）。<li>接口层：CLI/HTTP 服务/UI。</ul><h2 id=guan-jian-ji-shu-yu-lun-wen>关键技术与论文</h2><ul><li>ReAct：推理+行动交替框架，既解释又执行，提升复杂任务完成率。<li>Chain-of-Thought Prompting：引导模型“逐步思考”，提高推理准确性。<li>Tree of Thoughts：分支式思考与搜索，解决开放式与多路径问题。<li>Toolformer：让模型学会何时调用工具与如何处理返回。<li>Generative Agents：模拟具备记忆与日程的“类人代理”，用于交互式环境。<li>Reflexion：自我反思驱动的重试与改进，显著提升任务成功率。<li>RAG Survey：系统性检索增强（RAG）实践与评估方法。</ul><h2 id=mcp-yu-biao-zhun-hua-gong-ju-diao-yong>MCP 与标准化工具调用</h2><ul><li>MCP（Model Context Protocol）：统一工具接口，降低集成成本与安全风险。<li>价值：标准化请求/响应格式、权限控制、审计与跨模型复用。<li>场景：浏览器、文件系统、数据库、代码编辑器、第三方 API。</ul><h2 id=cong-ling-dao-yi-de-shi-zhan-lu-xian>从零到一的实战路线</h2><ul><li>明确目标与边界：任务类型（浏览器/代码/数据）、权限范围、期望成功率与成本预算。<li>选择组件：Claude/OpenAI/Gemini + 工具调用层（MCP/自研）+ 向量库 + 评估框架。<li>Prompt 策略：系统提示（角色、约束）、思维链示例、动作模板、结构化输出（JSON）。<li>工具与安全：定义工具协议、参数校验、权限与速率限制、错误恢复与回滚。<li>记忆与检索：语义记忆（向量库）+ 情节记忆（事件日志）；明确写入/读取策略。<li>评估与迭代：建立任务集，自动回放、记录指标、对比不同策略（ReAct vs CoT vs Reflexion）。<li>上线与监控：度量（成功/失败/耗时/Token/成本）、告警与可视化；灰度与 A/B。</ul><h2 id=prompt-gong-cheng-yao-dian>Prompt 工程要点</h2><ul><li>指令清晰：角色、目标、约束与失败标准；输出结构化 JSON。<li>CoT 与 ReAct：需要推理与行动交替的场景用 ReAct；纯推理用 CoT。<li>示例驱动：提供 1–3 个“任务→计划→工具调用→结果→评估”的高质量示例。<li>上下文封装：表格、JSON、Markdown 文本块；引用唯一 ID 便于追踪与审计。<li>自我反思与重试：引导“为什么失败”“下次怎么做”“修正计划”。</ul><h2 id=ping-gu-yu-du-liang>评估与度量</h2><ul><li>成功率：任务完成比例；分任务类别统计。<li>质量得分：是否满足验收条件；人审/自动规则/回归测试。<li>成本与延迟：Token 花费与响应时间；超时与重试次数。<li>稳定性：工具调用失败率、环境异常率、可重现程度。<li>可观测性：完整事件日志、工具输入输出、Prompt 与模型版本、追踪 ID。</ul><h2 id=chang-jian-xian-jing-yu-an-quan>常见陷阱与安全</h2><ul><li>注入攻击与越权：严格限制工具参数、白名单目标、拆分权限域、审计所有外部调用。<li>上下文污染：将不可信内容隔离在代码块或只读区；避免同上下文执行“改变世界”的动作。<li>评估偏差：仅看单轮成功率忽略重试次数与成本；建议综合指标。<li>过拟合示例：示例过多导致窄化；保持通用指令与少量高质量样例。</ul><h2 id=an-li-yu-gong-ju-jing-xuan>案例与工具（精选）</h2><ul><li>浏览器代理：从“读取页面→提取→总结→点击/填表→提交→校验→重试”的闭环。<li>代码助手：Claude Code/DevBots 实践——关键是沙箱、测试与审计。<li>数据工作流：RAG + 结构化工具；引入向量库（Pinecone 等）与质量评估。</ul><h2 id=xue-xi-lu-jing-yu-zi-yuan-qing-dan>学习路径与资源清单</h2><h3 id=videos>Videos</h3><ul><li>LLM Introduction: https://www.youtube.com/watch?v=zjkBMFhNj_g<li>LLMs from Scratch: https://www.youtube.com/watch?v=9vM4p9NN0Ts<li>Agentic AI Overview (Stanford): https://www.youtube.com/watch?v=kJLiOGle3Lw<li>Building and Evaluating Agents: https://www.youtube.com/watch?v=d5EltXhbcfA<li>Building Effective Agents: https://www.youtube.com/watch?v=D7_ipDqhtwk<li>Building Agents with MCP: https://www.youtube.com/watch?v=kQmXtrmQ5Zg<li>Building an Agent from Scratch: https://www.youtube.com/watch?v=xzXdLRUyjUg<li>Philo Agents: https://www.youtube.com/playlist?list=PLacQJwuclt_sV-tfZmpT1Ov6jldHl30NR</ul><h3 id=repos>Repos</h3><ul><li>GenAI Agents: https://github.com/nirdiamant/GenAI_Agents<li>Microsoft’s AI Agents for Beginners: https://github.com/microsoft/ai-agents-for-beginners<li>Prompt Engineering Guide: https://lnkd.in/gJjGbxQr<li>Hands-On Large Language Models: https://lnkd.in/dxaVF86w<li>AI Agents for Beginners: https://github.com/microsoft/ai-agents-for-beginners<li>GenAI Agents: https://lnkd.in/dEt72MEy<li>Made with ML: https://lnkd.in/d2dMACMj<li>Hands-On AI Engineering: https://github.com/Sumanth077/Hands-On-AI-Engineering<li>Awesome Generative AI Guide: https://lnkd.in/dJ8gxp3a<li>Designing Machine Learning Systems: https://lnkd.in/dEx8sQJK<li>Machine Learning for Beginners (Microsoft): https://lnkd.in/dBj3BAEY<li>LLM Course: https://github.com/mlabonne/llm-course</ul><h3 id=guides>Guides</h3><ul><li>Google’s Agent Whitepaper: https://lnkd.in/gFvCfbSN<li>Google’s Agent Companion: https://lnkd.in/gfmCrgAH<li>Building Effective Agents (Anthropic): https://lnkd.in/gRWKANS4<li>Claude Code Agentic Coding Practices: https://lnkd.in/gs99zyCf<li>OpenAI’s Practical Guide to Building Agents: https://lnkd.in/guRfXsFK</ul><h3 id=books>Books</h3><ul><li>Understanding Deep Learning: https://udlbook.github.io/udlbook/<li>Building an LLM from Scratch: https://lnkd.in/g2YGbnWS<li>The LLM Engineering Handbook: https://lnkd.in/gWUT2EXe<li>AI Agents: The Definitive Guide - Nicole Koenigstein: https://lnkd.in/dJ9wFNMD<li>Building Applications with AI Agents - Michael Albada: https://lnkd.in/dSs8srk5<li>AI Agents with MCP - Kyle Stratis: https://lnkd.in/dR22bEiZ<li>AI Engineering (O’Reilly): https://www.oreilly.com/library/view/ai-engineering/9781098166298/</ul><h3 id=papers>Papers</h3><ul><li>ReAct: https://lnkd.in/gRBH3ZRq<li>Generative Agents: https://lnkd.in/gsDCUsWm<li>Toolformer: https://lnkd.in/gyzrege6<li>Chain-of-Thought Prompting: https://lnkd.in/gaK5CXzD<li>Tree of Thoughts: https://lnkd.in/gRJdv_iU<li>Reflexion: https://lnkd.in/gGFMgjUj<li>Retrieval-Augmented Generation Survey: https://lnkd.in/gGUqkkyR</ul><h3 id=courses>Courses</h3><ul><li>HuggingFace’s Agent Course: https://lnkd.in/gmTftTXV<li>MCP with Anthropic: https://lnkd.in/geffcwdq<li>Building Vector Databases with Pinecone: https://lnkd.in/gCS4sd7Y<li>Vector Databases from Embeddings to Apps: https://lnkd.in/gm9HR6_2<li>Agent Memory: https://lnkd.in/gNFpC542<li>Building and Evaluating RAG apps: https://lnkd.in/g2qC9-mh<li>Building Browser Agents: https://lnkd.in/gsMmCifQ<li>LLMOps: https://lnkd.in/g7bHU37w<li>Evaluating AI Agents: https://lnkd.in/gHJtwF5s<li>Computer Use with Anthropic: https://lnkd.in/gMUWg7Fa<li>Multi-Agent Use: https://lnkd.in/gU9DY9kj<li>Improving LLM Accuracy: https://lnkd.in/gsE-4FvY<li>Agent Design Patterns: https://lnkd.in/gzKvx5A4<li>Multi Agent Systems: https://lnkd.in/gUayts9s</ul><h3 id=newsletters>Newsletters</h3><ul><li>Gradient Ascent: https://lnkd.in/gZbZAeQW<li>DecodingML by Paul: https://lnkd.in/gpZPgk7J<li>Deep (Learning) Focus by Cameron: https://lnkd.in/gTUNcUVE<li>NeoSage by Shivani: https://blog.neosage.io/<li>Jam with AI by Shirin and Shantanu: https://lnkd.in/gQXJzuV8<li>Data Hustle by Sai: https://lnkd.in/gZpdTTYD</ul><h2 id=luo-di-jian-yi>落地建议</h2><ul><li>从“单一工具+单目标”的微型代理开始（如浏览器抓取与总结），先打通端到端闭环。<li>引入评估与日志后再增加记忆与多步计划；注意限制权限与速率、保障可回滚。<li>用 MCP 或统一工具接口降低集成复杂度；将评估与迭代纳入常态工作流。</ul></div></div></section>