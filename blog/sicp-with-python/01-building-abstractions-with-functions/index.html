<!doctype html><html class=scroll-smooth lang=en><head><meta charset=utf-8><link href=/css/style.css rel=stylesheet><link href=/line-awesome/css/line-awesome.min.css rel=stylesheet><script defer src=/js/main.js></script><title>01. 函数抽象：编程的基石 | 码农的自留地</title><body class="bg-white dark:bg-slate-900 transition ease-in-out"><section><div class="sticky top-0 bg-slate-100 dark:bg-slate-800"><div class="container mx-auto px-auto xl:px-0 w-full xl:w-1/2 flex place-content-between py-16 xl:py-8 font-sans text-6xl xl:text-2xl text-slate-900 dark:text-slate-300"><div class=flex><a class="m-0 p-0 text-slate-900 hover:text-slate-700 dark:text-slate-300 dark:hover:text-slate-200" href=/blog/> /blog </a><a class="m-0 p-0 text-slate-900 hover:text-slate-700 dark:text-slate-300 dark:hover:text-slate-200" href=/blog/sicp-with-python/> /sicp-with-python </a></div><div class="flex gap-4"><div class="hidden cursor-pointer" id=back-to-top><i class="las la-level-up-alt"></i></div><a href=/><i class="las la-home"></i></a><div class=cursor-pointer id=darkmode-toggle><div class="hidden dark:inline"><i class="las la-sun"></i></div><div class="inline dark:hidden"><i class="las la-moon"></i></div></div></div></div></div><div class="container mx-auto w-full xl:w-1/2 mb-16"><div class="mt-4 font-serif text-slate-600 dark:text-slate-500 text-4xl xl:text-base">2026-02-07</div><h1 class="w-full xl:w-2/3 mt-4 mb-8 font-serif text-8xl xl:text-4xl text-slate-900 dark:text-slate-300">01. 函数抽象：编程的基石</h1><div class="mt-2 mb-6 flex flex-wrap gap-2"></div><div class="w-100 border-t mb-8 border-slate-300 dark:border-slate-700"></div><div class="prose dark:prose-invert prose-pre:rounded-none prose-headings:bg-amber-100 prose-headings:text-slate-800 dark:prose-headings:bg-indigo-900 prose-headings:font-normal dark:prose-headings:text-slate-300 prose-headings:p-2 prose-headings:w-max prose-headings:font-serif prose-2xl xl:prose-base"><h1 id=di-yi-zhang-shi-yong-han-shu-gou-jian-chou-xiang>第一章：使用函数构建抽象</h1><blockquote><p>“A language isn’t something you learn so much as something you join.”<br> — Arika Okrent</blockquote><p>计算机科学不仅仅是关于计算机的学科，它是关于<strong>抽象</strong>的艺术。所有的计算都始于三个基本要素：<ol><li><strong>表示信息</strong> (Representing information)<li><strong>处理逻辑</strong> (Specifying logic)<li><strong>设计抽象</strong> (Designing abstractions) —— 用于管理复杂性。</ol><p>本章我们将使用 Python 语言来探索这些基本思想。<h2 id=1-1-qi-bu-getting-started>1.1 起步 (Getting Started)</h2><p>Python 是一门非常适合教学和生产的语言，它强调代码的<strong>可读性</strong>和<strong>简洁性</strong>。<h3 id=1-1-1-jiao-hu-shi-hui-hua-interactive-sessions>1.1.1 交互式会话 (Interactive Sessions)</h3><p>学习 Python 最好的方式就是直接与它“对话”。在终端输入 <code>python3</code> 即可进入交互式模式（看到 <code>>>></code> 提示符）。<pre class=language-python data-lang=python><code class=language-python data-lang=python>>>> 2 + 2
4
</code></pre><p>在这里，你输入<strong>代码</strong>（表达式），解释器<strong>读取</strong>并<strong>执行</strong>它，然后打印<strong>结果</strong>。这被称为 REPL (Read-Eval-Print Loop)。<h3 id=1-1-2-chu-ti-yan-sha-shi-bi-ya-de-ci-hui-first-example>1.1.2 初体验：莎士比亚的词汇 (First Example)</h3><p>让我们来看一个稍微复杂一点的例子。Python 内置了强大的库，可以轻松处理网络数据。<p>我们要做的任务是：<strong>统计莎士比亚所有作品中，既是回文（正着读反着读都一样）且长度为 6 的单词。</strong><pre class=language-python data-lang=python><code class=language-python data-lang=python># 1. 导入处理 URL 的模块
from urllib.request import urlopen

# 2. 读取莎士比亚全集文本
# 这一步会从网络下载数据，可能需要一点时间
shakespeare = urlopen('http://composingprograms.com/shakespeare.txt')

# 3. 将文本解码、拆分成单词，并放入一个集合(set)中去重
# set 是一个“对象”，它包含数据（单词）和操作（如去重）
words = set(shakespeare.read().decode().split())

# 4. 使用“集合推导式”找出符合条件的单词
# 条件：长度为6 (len(w) == 6) 且 翻转后仍在集合中 (w[::-1] in words)
palindromes = {w for w in words if len(w) == 6 and w[::-1] in words}

print(palindromes)
</code></pre><p><strong>运行结果可能包含：</strong> <code>{'redder', 'drawer', 'reward', 'diaper', 'repaid'}</code><blockquote><p><strong>注</strong>：<code>diaper</code> (尿布) 倒过来是 <code>repaid</code> (偿还)，很有趣的文字游戏。</blockquote><p>这个例子展示了 Python 的强大之处：短短几行代码，就完成了<strong>数据获取</strong>、<strong>处理</strong>、<strong>逻辑判断</strong>和<strong>输出</strong>。<h3 id=1-1-3-guan-yu-cuo-wu-errors>1.1.3 关于错误 (Errors)</h3><p>计算机是非常“死板”的。哪怕少了一个括号，或者拼错了一个字母，它都会报错。<pre class=language-python data-lang=python><code class=language-python data-lang=python>>>> print("Hello"
  File "&LTstdin>", line 1
    print("Hello"
                ^
SyntaxError: unexpected EOF while parsing
</code></pre><p><strong>调试 (Debugging) 的原则：</strong><ol><li><strong>增量测试</strong>：写一点测一点，不要写完几百行再运行。<li><strong>隔离错误</strong>：将问题缩小到最小的代码片段。<li><strong>检查假设</strong>：解释器永远是对的，如果结果不对，说明你对代码行为的假设错了。</ol><hr><h2 id=1-2-bian-cheng-de-ji-ben-yuan-su-elements-of-programming>1.2 编程的基本元素 (Elements of Programming)</h2><p>任何强大的编程语言都包含三种机制：<ol><li><strong>基本表达式 (Primitive expressions)</strong>：语言中最简单的个体（如数字、字符串）。<li><strong>组合手段 (Means of combination)</strong>：将简单元素组合成复杂元素的方法。<li><strong>抽象手段 (Means of abstraction)</strong>：为复杂元素命名，并将其作为单元来操作。</ol><h3 id=1-2-1-biao-da-shi-expressions>1.2.1 表达式 (Expressions)</h3><p>最基本的表达式是数字。<pre class=language-python data-lang=python><code class=language-python data-lang=python>>>> 42
42
</code></pre><p>我们可以用<strong>中缀运算符</strong> (infix notation) 将它们组合起来：<pre class=language-python data-lang=python><code class=language-python data-lang=python>>>> 1/2 + 1/4 + 1/8
0.875
</code></pre><h3 id=1-2-2-diao-yong-biao-da-shi-call-expressions>1.2.2 调用表达式 (Call Expressions)</h3><p>这是编程中最重要的一类复合表达式。它将<strong>函数</strong>应用于<strong>参数</strong>。<pre class=language-python data-lang=python><code class=language-python data-lang=python>#   函数名   参数列表
#     ↓       ↓
>>> max(7.5, 9.5)
9.5
</code></pre><ul><li><strong>操作符 (Operator)</strong>：<code>max</code>（表示一个函数）<li><strong>操作数 (Operands)</strong>：<code>7.5</code> 和 <code>9.5</code>（参数）</ul><p>函数调用可以<strong>嵌套</strong>：<pre class=language-python data-lang=python><code class=language-python data-lang=python>>>> max(min(1, -2), min(pow(3, 5), -4))
-2
</code></pre><p>这里的逻辑是：先计算内部的 <code>min</code>，再将结果传给外部的 <code>max</code>。<h3 id=1-2-3-dao-ru-ku-han-shu-importing-library-functions>1.2.3 导入库函数 (Importing Library Functions)</h3><p>Python 的核心很小，但它的<strong>标准库</strong>非常大。我们需要用 <code>import</code> 语句来加载它们。<pre class=language-python data-lang=python><code class=language-python data-lang=python>>>> from math import sqrt, pi
>>> sqrt(256)
16.0
</code></pre><h3 id=1-2-4-ming-ming-yu-huan-jing-names-and-the-environment>1.2.4 命名与环境 (Names and the Environment)</h3><p><strong>赋值语句</strong> (Assignment statement) 是我们最基本的<strong>抽象手段</strong>。它允许我们给计算结果起个名字。<pre class=language-python data-lang=python><code class=language-python data-lang=python>>>> radius = 10
>>> area = pi * radius * radius
>>> area
314.1592653589793
</code></pre><ul><li><strong>绑定 (Binding)</strong>：<code>radius</code> 这个名字被绑定到了值 <code>10</code> 上。<li><strong>环境 (Environment)</strong>：解释器用来存储这些名字和值对应关系的地方。</ul><p><strong>多重赋值</strong>： Python 允许一行给多个变量赋值，这在交换变量值时非常有用：<pre class=language-python data-lang=python><code class=language-python data-lang=python>>>> x, y = 3, 4.5
>>> y, x = x, y  # 交换 x 和 y 的值
>>> x
4.5
</code></pre><h3 id=1-2-5-qian-tao-biao-da-shi-de-qiu-zhi-evaluating-nested-expressions>1.2.5 嵌套表达式的求值 (Evaluating Nested Expressions)</h3><p>理解 Python 如何求值至关重要。对于调用表达式 <code>f(x)</code>，求值过程是<strong>递归</strong>的：<ol><li><strong>求值操作符</strong> (Evaluate the operator)：找到 <code>f</code> 对应的函数。<li><strong>求值操作数</strong> (Evaluate the operands)：计算 <code>x</code> 的值。<li><strong>应用函数</strong> (Apply the function)：将函数应用于参数值。</ol><p>例如：<code>sub(pow(2, add(1, 10)), pow(2, 5))</code><p>我们可以用<strong>表达式树 (Expression Tree)</strong> 来可视化这个过程：<pre class=language-text data-lang=text><code class=language-text data-lang=text>          sub
        /     \
    pow         pow
   /   \       /   \
  2    add    2     5
      /   \
     1    10
</code></pre><p>求值顺序是<strong>从下往上</strong>，先算出 <code>add(1, 10) -> 11</code>，再算 <code>pow(2, 11) -> 2048</code>，最后算 <code>sub(...)</code>。<h3 id=1-2-6-chun-han-shu-yu-fei-chun-han-shu-pure-vs-non-pure-functions>1.2.6 纯函数与非纯函数 (Pure vs Non-Pure Functions)</h3><p>这是函数式编程中的核心概念。<p><strong>纯函数 (Pure Functions)</strong>：<ul><li><strong>输入决定输出</strong>：给定相同的输入，永远返回相同的输出。<li><strong>无副作用</strong>：不会改变环境状态（如打印内容、修改全局变量）。<li>例子：<code>abs(-2)</code>, <code>pow(2, 3)</code>, <code>max(1, 2)</code></ul><pre class=language-python data-lang=python><code class=language-python data-lang=python>>>> abs(-2)
2
# 再次调用，结果依然是 2，且没有其他事情发生
</code></pre><p><strong>非纯函数 (Non-Pure Functions)</strong>：<ul><li>会有<strong>副作用 (Side effects)</strong>。<li>例子：<code>print()</code></ul><pre class=language-python data-lang=python><code class=language-python data-lang=python>>>> print(1, 2, 3)
1 2 3      # 副作用：在屏幕上显示了字符
None       # 返回值：print 函数本身没有有意义的返回值，所以返回 None
</code></pre><p><strong>为什么要区分？</strong> 纯函数更容易测试、组合和并行化，因为它们是独立的。在编写程序时，我们应尽量多使用纯函数，将非纯函数（如输入输出）限制在特定区域。<hr><h2 id=zong-jie>总结</h2><p>本章我们学习了：<ul><li>如何启动 Python 交互式会话。<li><strong>表达式</strong>是值的表现形式，<strong>语句</strong>（如赋值）产生改变。<li><strong>函数调用</strong>是组合逻辑的核心。<li><strong>环境</strong>存储了名字和值的绑定。<li><strong>纯函数</strong>与<strong>非纯函数</strong>的区别。</ul><p>在下一章中，我们将深入探讨<strong>如何定义自己的函数</strong>，从而构建更强大的抽象。</div></div></section>