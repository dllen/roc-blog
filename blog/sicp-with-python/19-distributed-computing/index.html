<!doctype html><html class=scroll-smooth lang=en><head><meta charset=utf-8><link href=/css/style.css rel=stylesheet><link href=/line-awesome/css/line-awesome.min.css rel=stylesheet><script defer src=/js/main.js></script><title>19. 分布式计算：连接世界的架构 | 码农的自留地</title><body class="bg-white dark:bg-slate-900 transition ease-in-out"><section><div class="sticky top-0 bg-slate-100 dark:bg-slate-800"><div class="container mx-auto px-auto xl:px-0 w-full xl:w-1/2 flex place-content-between py-16 xl:py-8 font-sans text-6xl xl:text-2xl text-slate-900 dark:text-slate-300"><div class=flex><a class="m-0 p-0 text-slate-900 hover:text-slate-700 dark:text-slate-300 dark:hover:text-slate-200" href=/blog/> /blog </a><a class="m-0 p-0 text-slate-900 hover:text-slate-700 dark:text-slate-300 dark:hover:text-slate-200" href=/blog/sicp-with-python/> /sicp-with-python </a></div><div class="flex gap-4"><div class="hidden cursor-pointer" id=back-to-top><i class="las la-level-up-alt"></i></div><a href=/><i class="las la-home"></i></a><div class=cursor-pointer id=darkmode-toggle><div class="hidden dark:inline"><i class="las la-sun"></i></div><div class="inline dark:hidden"><i class="las la-moon"></i></div></div></div></div></div><div class="container mx-auto w-full xl:w-1/2 mb-16"><div class="mt-4 font-serif text-slate-600 dark:text-slate-500 text-4xl xl:text-base">2026-02-07</div><h1 class="w-full xl:w-2/3 mt-4 mb-8 font-serif text-8xl xl:text-4xl text-slate-900 dark:text-slate-300">19. 分布式计算：连接世界的架构</h1><div class="mt-2 mb-6 flex flex-wrap gap-2"></div><div class="w-100 border-t mb-8 border-slate-300 dark:border-slate-700"></div><div class="prose dark:prose-invert prose-pre:rounded-none prose-headings:bg-amber-100 prose-headings:text-slate-800 dark:prose-headings:bg-indigo-900 prose-headings:font-normal dark:prose-headings:text-slate-300 prose-headings:p-2 prose-headings:w-max prose-headings:font-serif prose-2xl xl:prose-base"><h1 id=di-shi-jiu-zhang-fen-bu-shi-ji-suan-lian-jie-shi-jie-de-jia-gou>第十九 章：分布式计算——连接世界的架构</h1><blockquote><p>“A distributed computing application is one in which multiple interconnected but independent computers coordinate to perform a joint computation.”</blockquote><p>在单机上，我们通过函数调用来组织程序。而在互联网时代，程序运行在不同的机器上，通过<strong>消息 (Messages)</strong> 来进行协作。这就是<strong>分布式计算 (Distributed Computing)</strong>。<h2 id=4-6-1-xiao-xi-yu-xie-yi-messages-and-protocols>4.6.1 消息与协议 (Messages and Protocols)</h2><p>独立的计算机不共享内存，它们只能通过网络发送字节序列来交流。为了让接收方听得懂，双方必须遵守共同的规则，这就是<strong>协议 (Protocol)</strong>。<h3 id=tcp-ip-xie-yi-zu>TCP/IP 协议族</h3><ul><li><strong>IP (Internet Protocol)</strong>: 负责将数据包 (Packets) 从一台机器路由到另一台机器。它不保证可靠性（可能会丢包、乱序）。<li><strong>TCP (Transmission Control Protocol)</strong>: 建立在 IP 之上，提供<strong>可靠的、有序的</strong>字节流传输。它通过“三次握手”建立连接，并处理重传和排序。</ul><h2 id=4-6-2-ke-hu-duan-fu-wu-qi-jia-gou-client-server-architecture>4.6.2 客户端/服务器架构 (Client/Server Architecture)</h2><p>这是最常见的分布式架构，也是万维网 (WWW) 的基础。<ul><li><strong>服务器 (Server)</strong>: 提供服务（如网页、数据库）。<li><strong>客户端 (Client)</strong>: 请求并消费服务（如浏览器、手机 App）。</ul><h3 id=an-li-fang-wen-yi-ge-wang-ye>案例：访问一个网页</h3><p>当你访问 <code>www.nytimes.com</code> 时，发生了一系列复杂的交互：<ol><li><strong>DNS 查询</strong>: 客户端问 DNS 服务器：“<code>www.nytimes.com</code> 的 IP 地址是多少？”<pre class=language-python data-lang=python><code class=language-python data-lang=python>>>> from socket import gethostbyname
>>> gethostbyname('www.nytimes.com')
'170.149.172.130'
</code></pre><li><strong>HTTP 请求</strong>: 客户端向该 IP 发送 HTTP GET 请求。<pre class=language-python data-lang=python><code class=language-python data-lang=python>>>> from urllib.request import urlopen
>>> response = urlopen('http://www.nytimes.com').read()
>>> response[:15]
b'&LT!DOCTYPE html>'
</code></pre><li><strong>HTTP 响应</strong>: 服务器返回 HTML 内容和状态码（如 <code>200 OK</code> 或 <code>404 Not Found</code>）。</ol><p>这种架构的优点是<strong>模块化</strong>：客户端不需要知道服务器如何存储数据，服务器也不关心客户端如何展示数据。缺点是<strong>单点故障</strong>：如果服务器挂了，所有客户端都无法使用服务。<h2 id=4-6-3-dui-deng-wang-luo-peer-to-peer-systems>4.6.3 对等网络 (Peer-to-Peer Systems)</h2><p>为了解决中心化服务器的瓶颈，<strong>P2P (Peer-to-Peer)</strong> 架构应运而生。<p>在 P2P 系统中，没有绝对的客户端或服务器，所有节点（Peers）都是平等的。<ul><li>每个节点既是消费者，也是贡献者（贡献计算能力、存储或带宽）。<li><strong>优点</strong>: 系统随着节点增加而变得更强大（可扩展性好），且没有单点故障。<li><strong>应用</strong>: BitTorrent (文件共享), Skype (VoIP 通话), 区块链。</ul><h3 id=xie-zuo-yu-fen-gong>协作与分工</h3><p>P2P 系统的核心挑战是<strong>组织结构</strong>。节点需要知道如何找到其他节点，以及如何将大任务拆解。这通常需要复杂的路由算法和分布式哈希表 (DHT)。<h2 id=zong-jie>总结</h2><p>分布式计算将编程的维度从“单机算法”扩展到了“网络协议”。无论是经典的 Client/Server 还是去中心化的 P2P，核心都是<strong>独立组件通过消息传递进行协作</strong>。<p>下一章，我们将探讨在分布式系统中如何处理大规模数据——<strong>MapReduce</strong> 及其背后的思想。<hr><p><em>参考链接：</em><ul><li><a href=https://www.composingprograms.com/pages/46-distributed-computing.html>Composing Programs 4.6 Distributed Computing</a></ul></div></div></section>